<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<meta name="format-detection" content="telephone=no, email=no" />
<title>聚车金融</title>
<link href="css/mui.min.css" rel="stylesheet" type="text/css" />
<link href="css/css.css" rel="stylesheet" type="text/css" />
<link href="css/recharge.css" rel="stylesheet" type="text/css" />
<link href="css/mui.picker.css" rel="stylesheet" />
<link href="css/mui.poppicker.css" rel="stylesheet" /> 
<script type="text/javascript" src="js/jquery-1.11.2.min.js" ></script>
<script src="js/mui.min.js"></script>

    <script type="text/javascript" charset="utf-8">
      	mui.init();
    </script>
    <style>
    	button:hover{ background: #fff;}
    	
    </style>
</head>
<body>
<!--<header class="mui-bar mui-bar-nav header">
	<a class="mui-icon mui-icon-left-nav mui-pull-left" id="back"></a>
	<a id="top_right_btn" class="mui-pull-right" style="display: block">充值记录</a>
	<h1 id="title" class="mui-title">充值</h1>
</header>-->
<header class="mui-bar mui-bar-nav header">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"><br /></a>
			<a id="top_right_btn" class="mui-pull-right" style="display:block;">充值记录</a>
			<h1 id="title" class="mui-title">充值</h1>
</header>
<div class="mui-content">
	<div class="recharge-money">可用余额：<span>0.00</span>元</div>
    <div class="recharge-je">充值金额：<input class="recharge-input font-moey" type="number" pattern="[0-9]*" name="" placeholder="输入充值金额"></div>
	<div class="recharge-money">持卡人信息</div>
	<ul class="mui-table-view recharge-sfz">
		 <li class="mui-table-view-cell">姓名
		 	<input class="recharge-input" type="text" name="" placeholder="请输入真实姓名">
		 </li>
         <li class="mui-table-view-cell">身份证         	
         	<input class="recharge-input" type="text" name="" placeholder="请输入真实身份证号码">	
         </li>	       
	</ul>
	<div class="recharge-ts">请填写本人真实信息，核实后不能更改</div>
	<div class="recharge-money">持卡人信息</div>
	<ul class="card-form mui-table-view">
		<li class="mui-table-view-cell">			
				<select id="bank" class="input-box" name="bank">
					<option value="1">请选择开户银行</option>
					<option value="1">中信银行</option>
					<option value="2">建设银行</option>
					<option value="3">工商银行</option>
					<option value="4">农业银行</option>
					<option value="5">招商银行</option>
					<option value="6">交通银行</option>
					<option value="7">中国银行</option>
					<option value="8">兴业银行</option>
					<option value="9">浦发银行</option>
					<option value="10">民生银行</option>
					<option value="11">邮政银行</option>
					<option value="12">平安银行</option>
					<option value="13">光大银行</option>
					<option value="14">华夏银行</option>
					<option value="15">广发银行</option>		
				</select>
		
		</li>
		<li class="mui-table-view-cell">
			<div class="input-box">
				<button id='showCityPicker' class="mui-btn recharge-ss" type='button'>请选择省市</button>
			</div>
		</li>
		 <li class="mui-table-view-cell">银行卡号         	
         	<input class="recharge-input" type="number" pattern="[0-9]*" name="" placeholder="请输入银行卡号">	
         </li>	         
		<input type="hidden" id="province" name="province" value="0" />
		<input type="hidden" id="city" name="city" value="0" />
		<input type="hidden" id="user_id" name="user_id" value="0" />
	</ul>
	<a class="recharge-find" href="#" id="card-btn">完成</a>

</div>
<script src="js/city.data1.js" type="text/javascript" charset="utf-8"></script>
<script src="js/mui.picker.js"></script>
<script src="js/mui.poppicker.js"></script>
<script>
	mui.init({
		
	})
	mui.plusReady(function(){
	
		window.addEventListener('refresh',function(){
		
		plus.webview.getWebviewById('czinfo').reload();
		});
		
		document.addEventListener("top-right-btn",function(e){
				e.preventDefault();
				mui.openWindow({'url':'/user/czjl.html',styles:{"aniShow":"slide-in-right","popGesture":"close"},waiting:{"autoShow":false}});		
			},false);	
	
	
	})
	
</script>
    <script type="text/javascript">
    	/*********************/
    		(function($, doc) {
				$.ready(function() {
					//-----------------------------------------
					//级联示例
						var cityPicker = new $.PopPicker({
							layer: 2
						});
						cityPicker.setData(cityData);
						
					var showCityPickerButton = document.getElementById('showCityPicker');
					showCityPickerButton.addEventListener('tap', function(event) {
						
						cityPicker.show(function(items) {
							console.log(JSON.stringify(items));
							showCityPickerButton.innerHTML = items[0].text + " " + items[1].text;
							document.getElementById("province").value = items[0].value;
							document.getElementById("city").value = items[1].value;
						});
					}, false);
				});
			})(mui, document);
    
    
    mui.plusReady(function(){
    	
//  	console.log(plus.android.invoke(plus.android.currentWebview(),"getHeight"));
    				//plus.navigator.setFullscreen(false);
					plus.webview.currentWebview().setStyle({
						softinputMode: "adjustResize"
					});
					window.addEventListener('resize', function() {

					}, false);
    	mui('body').on('tap','#card-btn',function(){
    		request = {};
    		request.account = $('#account').val();
    		request.province = $('#province').val();
    		request.city = $('#city').val();
    		request.bank = $('#bank').val();
    		request.branch = $('#branch').val();
    		request.user_id = user.uid();
    		if(request.account  == ''){
    			plus.nativeUI.alert("请输入银行卡卡号"); return false;
    		}
    		if(request.province  == ''){
    			plus.nativeUI.alert("请选择城市"); return false;
    		}
    		if(request.city  == ''){
    			plus.nativeUI.alert("请选择城市"); return false;
    		}
    		if($("#realname").val()  == ''){
    			plus.nativeUI.alert("请输入账户名"); return false;
    		}
    		account.cardbing(request,function(res){
    			if(res.status == 1){
    				mui.fire(plus.webview.currentWebview().opener(),'viewreload');
    				plus.nativeUI.alert('绑定成功');
    				setTimeout(function(){
    					mui.back();
    				},100);
    			}else{
    				plus.nativeUI.alert(res.msg);
    			}
    		});
    	})
    	
		document.addEventListener('senddata',function(e){
			//console.log(e.detail.realname);
			document.getElementById("realname").value = e.detail.realname;
		},false);	
		})	
    </script>
</body>
</html>